# 03 | 事务隔离：为什么你改了我还看不见？

这篇主要讲事务部分，是最容易出现在面试题里面的内容。

理解大于记忆，理解的前提是设身处地，自己想成设计的MySQL的人，更容易理解一些。

- 脏读 dirty read
- 不可重复读 non-repeatable read
- 幻读 phantom read


## 事务隔离级别

### 读未提交

其它一个事务，即使没有提交，也可以读到修改。

### 读提交

其它事务，只有事务提交，才可以读到数据。

### 可重复读

在事务A中，如果事务A未提交，那么外部改变是看不到的。

可重复读是通过在事务开始时，创建一个视图来实现的。

### 串行化

所有的事务都是串行执行的，不能并行执行。


## 尽量不要使用长事务

![](images/03-2.png)

MySQL中，每一条记录都会有一个回滚日志，如上图所示。

为了保证数据能够回滚，MySQL会保存回滚日志。

长事务会保存很久的长事务，导致回滚日志特别大。


## 事务的启动方式


```
begin
start transaction


commit

rollback
```

或者```set autocommit=0```,不会自动提交，手动提交才提交

改为```set autocommit=1```